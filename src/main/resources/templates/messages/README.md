# –®–∞–±–ª–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π FreeMarker

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —à–∞–±–ª–æ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

## –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### –ö–æ–º–∞–Ω–¥—ã

- **start.ftl** - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ /start

- **help.ftl** - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `isAdmin` (Boolean) - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

- **unknown-command.ftl** - –æ—Ç–≤–µ—Ç –Ω–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

### –û—à–∏–±–∫–∏

- **error-rate-limit.ftl** - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `message` (String) - —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏

- **error-auth-required.ftl** - –≤–∏–¥–µ–æ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º

- **error-invalid-url.ftl** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `message` (String) - —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏

- **error-video-not-found.ftl** - –≤–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `message` (String) - —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏

- **error-general.ftl** - –æ–±—â–∞—è –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

- **error-queue-add.ftl** - –æ—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥—å

- **error-send-video.ftl** - –æ—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–∏–¥–µ–æ

### –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–µ–æ

- **no-video-found.ftl** - –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–µ—Ç –≤–∏–¥–µ–æ

- **select-video.ftl** - –≤—ã–±–æ—Ä –≤–∏–¥–µ–æ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `videoCount` (Int) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ

- **cached-video-caption.ftl** - caption –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
    - `videoTitle` (String?) - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ
    - `fileSize` (Long?) - —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
    - `botUsername` (String) - username –±–æ—Ç–∞

### –û—á–µ—Ä–µ–¥—å –∑–∞–≥—Ä—É–∑–∫–∏

- **queue-added-start.ftl** - –≤–∏–¥–µ–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ, –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è

- **queue-added-position.ftl** - –≤–∏–¥–µ–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ, –∂–¥–µ–º –≤ –æ—á–µ—Ä–µ–¥–∏
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `position` (Int) - –ø–æ–∑–∏—Ü–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–í—Å–µ —à–∞–±–ª–æ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è —á–µ—Ä–µ–∑ `MessageTemplateService`:

```kotlin
// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–µ
val message = messageTemplateService.renderMessage("start.ftl")
telegramSenderService.sendMessage(chatId, message)

// –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
val message = messageTemplateService.renderMessage("queue-added-position.ftl", mapOf(
    "position" to 5
))
```

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å FreeMarker

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```ftl
${variable}                              - –í—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
${variable!"–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"}      - –° –¥–µ—Ñ–æ–ª—Ç–æ–º
${variable?string("0.00")}               - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–ª–∞
```

### –£—Å–ª–æ–≤–∏—è

```ftl
<#if isAdmin>
–ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã...
</#if>

<#if videoTitle??>
üìπ ${videoTitle}
</#if>
```

### –í—ã—á–∏—Å–ª–µ–Ω–∏—è

```ftl
${(fileSize / (1024.0 * 1024.0))?string["0.00"]} –ú–ë
```

## –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `start.ftl`:
```ftl
–ü—Ä–∏–≤–µ—Ç! üëã –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ —Å–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ —Å Pikabu.

–û—Ç–ø—Ä–∞–≤—å –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ—Å—Ç, –∏ —è —Å–¥–µ–ª–∞—é –≤—Å—é —Ä–∞–±–æ—Ç—É!

/help - —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ
```

### –î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏

```ftl
‚ö†Ô∏è ${message}
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞

–í `cached-video-caption.ftl`:
```ftl
‚úÖ –†–∞–∑–º–µ—Ä: ${(fileSize / (1024.0 * 1024.0))?string["0"]} MB
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è FreeMarker

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://freemarker.apache.org/docs/

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.
