# =================================
# Pikabu Download Bot - Production
# External PostgreSQL Database
# =================================
#
# Используйте этот файл, если PostgreSQL уже запущен
# на сервере или на отдельном DB сервере
#
# ВАЖНО: После редактирования выполните: chmod 600 .env

# =================================
# TELEGRAM BOT (ОБЯЗАТЕЛЬНО!)
# =================================
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
BOT_USERNAME=YourBotUsername

# =================================
# ADMIN (ОБЯЗАТЕЛЬНО!)
# =================================
ADMIN_USER_ID=123456789
ADMIN_ENABLE_NOTIFICATIONS=true
ADMIN_ENABLE_DAILY_DIGEST=false

# =================================
# APPLICATION
# =================================
SERVER_PORT=8080
APP_MAX_CONCURRENT_DOWNLOADS=5
APP_RATE_LIMIT_MAX_REQUESTS=1000
APP_RATE_LIMIT_WINDOW_HOURS=1

# =================================
# EXTERNAL DATABASE CONNECTION
# =================================
# ВАЖНО: Настройте подключение к вашей PostgreSQL БД

# Вариант 1: PostgreSQL на том же сервере (localhost)
# Если используете network_mode: host в docker-compose
# ВАЖНО: currentSchema=pikabu_bot явно указывает схему!
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/pikabu_bot?currentSchema=pikabu_bot

# Вариант 2: PostgreSQL на другом хосте
# SPRING_DATASOURCE_URL=jdbc:postgresql://db-server.example.com:5432/pikabu_bot?currentSchema=pikabu_bot

# Вариант 3: PostgreSQL по IP адресу
# SPRING_DATASOURCE_URL=jdbc:postgresql://10.0.1.100:5432/pikabu_bot?currentSchema=pikabu_bot

# Credentials для БД
SPRING_DATASOURCE_USERNAME=pikabu_user
SPRING_DATASOURCE_PASSWORD=your_database_password

# =================================
# ПОДГОТОВКА БАЗЫ ДАННЫХ
# =================================
#
# Перед запуском создайте БД, схему и пользователя:
#
# sudo -u postgres psql << 'EOF'
# CREATE DATABASE pikabu_bot;
# \c pikabu_bot
# CREATE USER pikabu_user WITH PASSWORD 'your_database_password';
# CREATE SCHEMA IF NOT EXISTS pikabu_bot;
# GRANT ALL PRIVILEGES ON DATABASE pikabu_bot TO pikabu_user;
# GRANT ALL ON SCHEMA pikabu_bot TO pikabu_user;
# ALTER DEFAULT PRIVILEGES IN SCHEMA pikabu_bot GRANT ALL ON TABLES TO pikabu_user;
# ALTER DEFAULT PRIVILEGES IN SCHEMA pikabu_bot GRANT ALL ON SEQUENCES TO pikabu_user;
# EOF
#
# ВАЖНО: Используется схема pikabu_bot, НЕ public!
# Миграции Liquibase применятся автоматически при старте!

# =================================
# NETWORK NOTES
# =================================
#
# Если PostgreSQL на localhost:
# 1. Раскомментируйте network_mode: "host" в docker-compose.yml
# 2. Используйте localhost в SPRING_DATASOURCE_URL
#
# Если PostgreSQL на другом хосте:
# 1. Используйте IP или hostname в SPRING_DATASOURCE_URL
# 2. Убедитесь что PostgreSQL разрешает внешние подключения
#    (postgresql.conf: listen_addresses = '*')
# 3. Настройте pg_hba.conf для доступа с IP Docker контейнера
