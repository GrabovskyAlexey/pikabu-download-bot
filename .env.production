# =================================
# Pikabu Download Bot - Production
# =================================
#
# Скопируйте этот файл на сервер в /opt/pikabu-bot/.env
# и отредактируйте значения
#
# ВАЖНО: После редактирования выполните: chmod 600 .env

# =================================
# TELEGRAM BOT (ОБЯЗАТЕЛЬНО!)
# =================================
# Получите токен у @BotFather в Telegram
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11

# Username вашего бота (без @)
BOT_USERNAME=YourBotUsername

# =================================
# ADMIN (ОБЯЗАТЕЛЬНО!)
# =================================
# Ваш Telegram ID (узнайте у @userinfobot)
ADMIN_USER_ID=123456789

# Включить уведомления админу о критичных ошибках
ADMIN_ENABLE_NOTIFICATIONS=true

# Включить ежедневный дайджест в 9:00 (опционально)
ADMIN_ENABLE_DAILY_DIGEST=false

# Включить еженедельный дайджест по понедельникам в 9:00 с топом популярных видео (опционально)
ADMIN_ENABLE_WEEKLY_DIGEST=false

# =================================
# DATABASE (ОБЯЗАТЕЛЬНО СМЕНИТЬ ПАРОЛЬ!)
# =================================
DB_NAME=pikabu_bot
DB_USER=pikabu_user

# ВАЖНО: Используйте надежный пароль!
DB_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD

# =================================
# APPLICATION
# =================================
# Порт для Spring Boot Actuator
SERVER_PORT=8080

# Максимум одновременных загрузок (рекомендуется 3-5)
APP_MAX_CONCURRENT_DOWNLOADS=5

# Rate limiting на пользователя
APP_RATE_LIMIT_MAX_REQUESTS=1000
APP_RATE_LIMIT_WINDOW_HOURS=1

# =================================
# LOGGING
# =================================
# Уровни логирования: TRACE, DEBUG, INFO, WARN, ERROR, OFF
# Для отладки установите DEBUG, для прода - INFO
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_APP=INFO
LOGGING_LEVEL_PARSER=INFO
LOGGING_LEVEL_DOWNLOAD=INFO
LOGGING_LEVEL_QUEUE=INFO

# Настройки ротации логов
LOGGING_FILE_PATH=./logs/pikabu-bot.log
LOGGING_MAX_FILE_SIZE=100MB
LOGGING_MAX_HISTORY=30
LOGGING_TOTAL_SIZE_CAP=3GB

# =================================
# PIKABU AUTHENTICATION (ОПЦИОНАЛЬНО)
# =================================
# Для скачивания видео доступных только авторизованным пользователям
#
# Можно оставить пустым и использовать команду /update_auth в боте
# для обновления cookies без перезапуска
#
# Или указать cookies здесь:
# 1. Откройте pikabu.ru в браузере и авторизуйтесь
# 2. Нажмите F12 → Application → Cookies → https://pikabu.ru
# 3. Найдите cookie PHPSESS (основная для авторизации)
# 4. Скопируйте в формате: PHPSESS=значение
#
# Пример: PIKABU_AUTH_COOKIES="PHPSESS=abc123def456"
#
PIKABU_AUTH_ENABLED=false
PIKABU_AUTH_COOKIES=

# =================================
# DATABASE CONNECTION (INTERNAL)
# =================================
# Эти настройки используются внутри Docker контейнера
# Пароль должен совпадать с DB_PASSWORD выше!
# ВАЖНО: currentSchema=pikabu_bot гарантирует использование правильной схемы
SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/pikabu_bot?currentSchema=pikabu_bot
SPRING_DATASOURCE_USERNAME=pikabu_user
SPRING_DATASOURCE_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD

# =================================
# ПРИМЕЧАНИЯ
# =================================
#
# 1. После редактирования защитите файл:
#    chmod 600 .env
#
# 2. Проверьте, что установлены:
#    - BOT_TOKEN (правильный токен от @BotFather)
#    - BOT_USERNAME (имя вашего бота)
#    - ADMIN_USER_ID (ваш Telegram ID)
#    - DB_PASSWORD и SPRING_DATASOURCE_PASSWORD (одинаковые!)
#
# 3. Для получения токена:
#    - Напишите @BotFather в Telegram
#    - /newbot
#    - Следуйте инструкциям
#    - Скопируйте токен
#
# 4. Для получения вашего Telegram ID:
#    - Напишите @userinfobot в Telegram
#    - Скопируйте "Id" число
